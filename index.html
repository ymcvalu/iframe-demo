<html>
<body>

<iframe src="http://127.0.0.1:8080/frame.html" width="100%" height="500px" id="sso-login" name="sso-login">
    不支持iframe
</iframe>

<script>
    function init(){
        let handler = function(event){
            window.removeEventListener("message",handler,false)
            localStorage.setItem("access_token",event.data)
            iframeNode = (document.getElementById("sso-login"))
            iframeNode.parentElement.removeChild(iframeNode)
        }
        window.addEventListener("message",handler,false)
    }
    init()

</script>
<button id="btn">click</button>
<button id="del">clear</button>
<script>
    btn = document.getElementById("btn")
    btn.onclick=function () {
        alert(localStorage.getItem("access_token"))
        console.log("click")
    }
    document.getElementById("del").onclick=()=>{
        localStorage.removeItem("access_token")
    }
</script>
</body>
</html>